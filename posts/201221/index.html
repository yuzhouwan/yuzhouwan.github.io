<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/yuzhouwan_logo_with_copyright.jpg">
  <link rel="icon" type="image/png" sizes="32x32" href="/yuzhouwan_logo_32x32.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/yuzhouwan_logo_16x16.ico">
  <link rel="mask-icon" href="/yuzhouwan_logo_with_copyright.jpg" color="#222">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yuzhouwan.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":5,"onmobile":true},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":true,"nav":{"valine":{"text":"Valine：匿名","order":-1},"disqus":{"text":"Disqus：海外","order":-2},"gitalk":{"text":"Gitalk：可用 Github 账号登录","order":-3}}},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":true,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Apache IoTDB 是什么？ Apache IoTDB™ (Database for Internet of Things) is an IoT native database with high performance for data management and analysis, deployable on the edge and the cloud.   （图片来源：Apache">
<meta property="og:type" content="article">
<meta property="og:title" content="Apache IoTDB：一款面向物联网的数据库">
<meta property="og:url" content="https://yuzhouwan.com/posts/201221/">
<meta property="og:site_name" content="宇宙湾">
<meta property="og:description" content="Apache IoTDB 是什么？ Apache IoTDB™ (Database for Internet of Things) is an IoT native database with high performance for data management and analysis, deployable on the edge and the cloud.   （图片来源：Apache">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://yuzhouwan.com/picture/iotdb/apache_iotdb_logo.png">
<meta property="og:image" content="https://yuzhouwan.com/picture/iotdb/apache_iotdb_architecture.png">
<meta property="og:image" content="https://yuzhouwan.com/picture/iotdb/apache_iotdb_star_history.jpg">
<meta property="og:image" content="https://img.shields.io/badge/QQ%E7%BE%A4-1020982-blue.svg">
<meta property="og:image" content="https://img.shields.io/badge/QQ%E7%BE%A4-1217710-blue.svg">
<meta property="og:image" content="https://img.shields.io/badge/QQ%E7%BE%A4-1670647-blue.svg">
<meta property="og:image" content="https://img.shields.io/badge/QQ%E7%BE%A4-5366753-blue.svg">
<meta property="article:published_time" content="2020-12-21T13:35:06.000Z">
<meta property="article:modified_time" content="2021-02-21T04:19:38.118Z">
<meta property="article:author" content="Benedict Jin">
<meta property="article:tag" content="IoT">
<meta property="article:tag" content="物联网">
<meta property="article:tag" content="Apache IoTDB">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://yuzhouwan.com/picture/iotdb/apache_iotdb_logo.png">

<link rel="canonical" href="https://yuzhouwan.com/posts/201221/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Apache IoTDB：一款面向物联网的数据库 | 宇宙湾</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-97020848-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-97020848-1');
      }
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>


<style>.null { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .null > span { position: relative; z-index: 10; }  .null img, .null .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .null img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .null-fallback { color: inherit; } .null-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="宇宙湾" type="application/atom+xml"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">宇宙湾</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">厚积薄发</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">147</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">15</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">54</span></a>

  </li>
        <li class="menu-item menu-item-书单">

    <a href="/books/" rel="section"><i class="fa fa-book fa-fw"></i>书单</a>

  </li>
        <li class="menu-item menu-item-影视">

    <a href="/movies/" rel="section"><i class="fa fa-film fa-fw"></i>影视</a>

  </li>
        <li class="menu-item menu-item-友链">

    <a href="/links/" rel="section"><i class="fa fa-link fa-fw"></i>友链</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://yuzhouwan.com/posts/201221/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/yuzhouwan_logo_128x128.ico">
      <meta itemprop="name" content="Benedict Jin">
      <meta itemprop="description" content="Benedict Jin's Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="宇宙湾">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Apache IoTDB：一款面向物联网的数据库
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-21 21:35:06" itemprop="dateCreated datePublished" datetime="2020-12-21T21:35:06+08:00">2020-12-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-21 12:19:38" itemprop="dateModified" datetime="2021-02-21T12:19:38+08:00">2021-02-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%89%A9%E8%81%94%E7%BD%91/" itemprop="url" rel="index"><span itemprop="name">物联网</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>33k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>30 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="Apache-IoTDB-是什么？"><a href="#Apache-IoTDB-是什么？" class="headerlink" title="Apache IoTDB 是什么？"></a>Apache IoTDB 是什么？</h2><blockquote>
<p><strong><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/apache/iotdb">Apache IoTDB</a></strong>™ (Database for Internet of Things) is an IoT native database with high performance for data management and analysis, deployable on the edge and the cloud.</p>
</blockquote>
<p><img data-src="/picture/iotdb/apache_iotdb_logo.png" alt></p>
<center>（图片来源：<a href="https://iotdb.apache.org/" target="_blank" rel="external nofollow noopener noreferrer">Apache IoTDB</a>™ 官网）</center>



<h2 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h2><ul>
<li>高吞吐量读写</li>
<li>高效的目录结构</li>
<li>丰富的查询语义</li>
<li>硬件成本低</li>
<li>灵活的部署</li>
<li>与开源生态系统的紧密集成</li>
</ul>
<h2 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h2><ul>
<li>高端制造业</li>
<li>本地控制器服务器</li>
<li>云数据管理</li>
</ul>
<span id="more"></span>
<h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><h3 id="Docker-容器版"><a href="#Docker-容器版" class="headerlink" title="Docker 容器版"></a><a target="_blank" rel="external nofollow noopener noreferrer" href="https://hub.docker.com/r/apache/iotdb">Docker 容器版</a></h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ docker pull apache/iotdb</span><br><span class="line">$ docker run -d -p 6667:6667 -p 31999:31999 -p 8181:8181 --name yuzhouwan-iotdb apache/iotdb:latest</span><br><span class="line">$ docker <span class="built_in">exec</span> -it `docker ps | grep iotdb | awk <span class="string">'{print $1}'</span>` bash</span><br><span class="line">$ start-cli.sh</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">IoTDB&gt; login successfully</span><br><span class="line">IoTDB&gt; <span class="built_in">help</span></span><br><span class="line">    &lt;your-sql&gt;                  execute your sql statment</span><br><span class="line">    show timeseries             show how many timeseries are <span class="keyword">in</span> iotdb</span><br><span class="line">    <span class="built_in">set</span> time_display_type=xxx   eg. long, default, ISO8601, yyyy-MM-dd HH:mm:ss.</span><br><span class="line">    show time_display_type      show time display <span class="built_in">type</span></span><br><span class="line">    <span class="built_in">set</span> time_zone=xxx           eg. +08:00, Asia/Shanghai.</span><br><span class="line">    show time_zone              show cli time zone</span><br><span class="line">    <span class="built_in">set</span> fetch_size=xxx          <span class="built_in">set</span> fetch size when querying data from server.</span><br><span class="line">    show fetch_size             show fetch size</span><br><span class="line">    <span class="built_in">set</span> max_display_num=xxx     eg. <span class="built_in">set</span> max lines <span class="keyword">for</span> cli to ouput, -1 equals to unlimited.</span><br><span class="line"></span><br><span class="line">IoTDB&gt; insert into root.ln.wf01.wt01(timestamp, status) values(100, <span class="literal">true</span>);</span><br><span class="line">Msg: The statement is executed successfully.</span><br><span class="line"></span><br><span class="line">IoTDB&gt; show timeseries</span><br><span class="line">+------------------------+-----+-------------+--------+--------+-----------+</span><br><span class="line">|              timeseries|<span class="built_in">alias</span>|storage group|dataType|encoding|compression|</span><br><span class="line">+------------------------+-----+-------------+--------+--------+-----------+</span><br><span class="line">|root.ln.wf01.wt01.status| null|      root.ln| BOOLEAN|     RLE|     SNAPPY|</span><br><span class="line">+------------------------+-----+-------------+--------+--------+-----------+</span><br><span class="line">Total line number = 1</span><br><span class="line">It costs 0.008s</span><br><span class="line"></span><br><span class="line">IoTDB&gt; select * from root.ln.wf01.wt01;</span><br><span class="line">+-----------------------------+------------------------+</span><br><span class="line">|                         Time|root.ln.wf01.wt01.status|</span><br><span class="line">+-----------------------------+------------------------+</span><br><span class="line">|1970-01-01T08:00:00.100+08:00|                    <span class="literal">true</span>|</span><br><span class="line">+-----------------------------+------------------------+</span><br><span class="line">Total line number = 1</span><br><span class="line">It costs 0.005s</span><br><span class="line"></span><br><span class="line">IoTDB&gt; <span class="built_in">exit</span></span><br></pre></td></tr></tbody></table></figure>
<h3 id="集群版"><a href="#集群版" class="headerlink" title="集群版"></a>集群版</h3><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git fetch upstream cluster_new:cluster_new</span><br><span class="line">$ git checkout cluster_new</span><br><span class="line">$ ./mvnw.sh clean package -T 1C -DskipTests</span><br><span class="line">$ find . -name <span class="string">'*.zip'</span> -<span class="built_in">type</span> f -<span class="built_in">exec</span> <span class="built_in">echo</span> {} \;</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">./cluster/target/cluster-0.12.0-SNAPSHOT.zip</span><br><span class="line">./distribution/target/apache-iotdb-0.12.0-SNAPSHOT-bin.zip</span><br><span class="line">./server/target/iotdb-server-0.12.0-SNAPSHOT.zip</span><br><span class="line">./cli/target/iotdb-cli-0.12.0-SNAPSHOT.zip</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir -p ~/apps/iotdb/cluster/node1</span><br><span class="line">$ mkdir -p ~/apps/iotdb/cluster/node2</span><br><span class="line">$ mkdir -p ~/apps/iotdb/cluster/node3</span><br><span class="line">$ cp ./cluster/target/cluster-0.12.0-SNAPSHOT.zip ~/apps/iotdb/cluster/node1/</span><br><span class="line">$ cp ./cluster/target/cluster-0.12.0-SNAPSHOT.zip ~/apps/iotdb/cluster/node2/</span><br><span class="line">$ cp ./cluster/target/cluster-0.12.0-SNAPSHOT.zip ~/apps/iotdb/cluster/node3/</span><br><span class="line">$ <span class="built_in">cd</span> ~/apps/iotdb/cluster/node1</span><br><span class="line">$ unzip cluster-0.12.0-SNAPSHOT.zip</span><br><span class="line">$ <span class="built_in">cd</span> ~/apps/iotdb/cluster/node2</span><br><span class="line">$ unzip cluster-0.12.0-SNAPSHOT.zip</span><br><span class="line">$ <span class="built_in">cd</span> ~/apps/iotdb/cluster/node3</span><br><span class="line">$ unzip cluster-0.12.0-SNAPSHOT.zip</span><br><span class="line">$ <span class="built_in">cd</span> ~/apps/iotdb/cluster</span><br><span class="line">$ chmod +x node1/sbin/start-node.sh</span><br><span class="line">$ chmod +x node2/sbin/start-node.sh</span><br><span class="line">$ chmod +x node3/sbin/start-node.sh</span><br><span class="line">$ sed -<span class="keyword">in</span>-place -e <span class="string">'s/31999/31997/g'</span> node1/conf/iotdb-env.sh</span><br><span class="line">$ sed -<span class="keyword">in</span>-place -e <span class="string">'s/31999/31998/g'</span> node2/conf/iotdb-env.sh</span><br><span class="line">$ node1/sbin/start-node.sh -internal_meta_port 9003 -internal_data_port 40010 -cluster_rpc_port 55560</span><br><span class="line">$ node2/sbin/start-node.sh -internal_meta_port 9005 -internal_data_port 40012 -cluster_rpc_port 55561</span><br><span class="line">$ node3/sbin/start-node.sh -internal_meta_port 9007 -internal_data_port 40014 -cluster_rpc_port 55562</span><br></pre></td></tr></tbody></table></figure>
<h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir ~/apps/iotdb/standalone</span><br><span class="line">$ cp ./cli/target/iotdb-cli-0.12.0-SNAPSHOT.zip ~/apps/iotdb/standalone/</span><br><span class="line">$ <span class="built_in">cd</span> ~/apps/iotdb/standalone</span><br><span class="line">$ chmod +x sbin/start-cli.sh</span><br><span class="line">$ sbin/start-cli.sh</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">---------------------</span><br><span class="line">Starting IoTDB Cli</span><br><span class="line">---------------------</span><br><span class="line"> _____       _________  ______   ______</span><br><span class="line">|_   _|     |  _   _  ||_   _ `.|_   _ \</span><br><span class="line">  | |   .--.|_/ | | \_|  | | `. \ | |_) |</span><br><span class="line">  | | / .<span class="string">'`\ \  | |      | |  | | |  __'</span>.</span><br><span class="line"> _| |_| \__. | _| |_    _| |_.<span class="string">' /_| |__) |</span></span><br><span class="line"><span class="string">|_____|'</span>.__.<span class="string">' |_____|  |______.'</span>|_______/  version 0.12.0-SNAPSHOT</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">IoTDB&gt; login successfully</span><br><span class="line">IoTDB&gt; show timeseries</span><br><span class="line">+----------+-----+-------------+--------+--------+-----------+----+----------+</span><br><span class="line">|timeseries|<span class="built_in">alias</span>|storage group|dataType|encoding|compression|tags|attributes|</span><br><span class="line">+----------+-----+-------------+--------+--------+-----------+----+----------+</span><br><span class="line">+----------+-----+-------------+--------+--------+-----------+----+----------+</span><br><span class="line">Empty <span class="built_in">set</span>.</span><br><span class="line">It costs 0.276s</span><br><span class="line"></span><br><span class="line">IoTDB&gt; <span class="built_in">set</span> storage group to root.yuzhouwan</span><br><span class="line">Msg: The statement is executed successfully.</span><br><span class="line"></span><br><span class="line">IoTDB&gt; create timeseries root.yuzhouwan.user with datatype=INT64,encoding=PLAIN</span><br><span class="line">Msg: The statement is executed successfully.</span><br><span class="line"></span><br><span class="line">IoTDB&gt; insert into root.yuzhouwan(timestamp, user) values(1, 1)</span><br><span class="line">Msg: The statement is executed successfully.</span><br><span class="line"></span><br><span class="line">IoTDB&gt; show timeseries</span><br><span class="line">+-------------------+-----+--------------+--------+--------+-----------+----+----------+</span><br><span class="line">|         timeseries|<span class="built_in">alias</span>| storage group|dataType|encoding|compression|tags|attributes|</span><br><span class="line">+-------------------+-----+--------------+--------+--------+-----------+----+----------+</span><br><span class="line">|root.yuzhouwan.user| null|root.yuzhouwan|   INT64|   PLAIN|     SNAPPY|null|      null|</span><br><span class="line">+-------------------+-----+--------------+--------+--------+-----------+----+----------+</span><br><span class="line">Total line number = 1</span><br><span class="line">It costs 0.015s</span><br><span class="line"></span><br><span class="line">IoTDB&gt; select * from root.yuzhouwan</span><br><span class="line">+-----------------------------+-------------------+</span><br><span class="line">|                         Time|root.yuzhouwan.user|</span><br><span class="line">+-----------------------------+-------------------+</span><br><span class="line">|1970-01-01T08:00:00.001+08:00|                  1|</span><br><span class="line">+-----------------------------+-------------------+</span><br><span class="line">Total line number = 1</span><br><span class="line">It costs 0.005s</span><br><span class="line"></span><br><span class="line">IoTDB&gt; select * from root.*</span><br><span class="line">+-----------------------------+-------------------+</span><br><span class="line">|                         Time|root.yuzhouwan.user|</span><br><span class="line">+-----------------------------+-------------------+</span><br><span class="line">|1970-01-01T08:00:00.001+08:00|                  1|</span><br><span class="line">+-----------------------------+-------------------+</span><br><span class="line">Total line number = 1</span><br><span class="line">It costs 0.004s</span><br><span class="line"></span><br><span class="line">IoTDB&gt; select * from root</span><br><span class="line">+-----------------------------+-------------------+</span><br><span class="line">|                         Time|root.yuzhouwan.user|</span><br><span class="line">+-----------------------------+-------------------+</span><br><span class="line">|1970-01-01T08:00:00.001+08:00|                  1|</span><br><span class="line">+-----------------------------+-------------------+</span><br><span class="line">Total line number = 1</span><br><span class="line">It costs 0.005s</span><br><span class="line"></span><br><span class="line">IoTDB&gt; show child paths root</span><br><span class="line">+--------------+</span><br><span class="line">|   child paths|</span><br><span class="line">+--------------+</span><br><span class="line">|root.yuzhouwan|</span><br><span class="line">+--------------+</span><br><span class="line">Total line number = 1</span><br><span class="line">It costs 0.003s</span><br><span class="line"></span><br><span class="line">IoTDB&gt; show child paths root.*</span><br><span class="line">+-------------------+</span><br><span class="line">|        child paths|</span><br><span class="line">+-------------------+</span><br><span class="line">|root.yuzhouwan.user|</span><br><span class="line">+-------------------+</span><br><span class="line">Total line number = 1</span><br><span class="line">It costs 0.002s</span><br></pre></td></tr></tbody></table></figure>
<h4 id="停止"><a href="#停止" class="headerlink" title="停止"></a>停止</h4><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">for</span> p <span class="keyword">in</span> `jps -ml | grep iotdb | awk <span class="string">'{print $1}'</span>`; <span class="keyword">do</span> <span class="built_in">echo</span> <span class="variable">$p</span> &amp;&amp; <span class="built_in">kill</span> <span class="variable">$p</span>; <span class="keyword">done</span></span><br></pre></td></tr></tbody></table></figure>
<h4 id="待完善列表"><a href="#待完善列表" class="headerlink" title="待完善列表"></a>待完善列表</h4><ul>
<li>模拟集群故障频繁重启的情况，发现 RaftServer 会出现 OOM 问题，可能存在线程泄露问题</li>
<li>可以考虑使用 Google 设计的有界一致性 Hash 算法，替换原生的一致性算法，以提高集群扩缩容时的平衡性</li>
</ul>
<h2 id="架构"><a href="#架构" class="headerlink" title="架构"></a>架构</h2><h3 id="总体架构图"><a href="#总体架构图" class="headerlink" title="总体架构图"></a>总体架构图</h3><p><img data-src="/picture/iotdb/apache_iotdb_architecture.png" alt="Apache IoTDB Architecture"></p>
<center>（图片来源：<a href="https://iotdb.apache.org/" target="_blank" rel="external nofollow noopener noreferrer">iotdb.apache.org</a>™）</center>

<h3 id="写入链路"><a href="#写入链路" class="headerlink" title="写入链路"></a>写入链路</h3><pre class="mermaid">sequenceDiagram

participant Thrift
participant TSIService
participant TSServiceImpl
participant Planner
participant PlanExecutor
participant StorageEngine
participant StorageGroupProcessor
participant TsFileProcessor
participant AbstractMemTable
participant InsertRowPlan
participant WritableMemChunk
participant MeasurementSchema
participant TVList
participant ExclusiveWriteLogNode
participant TsFileFlushPolicy

opt insert into root.yuzhouwan(timestamp, value) values(1,1)
Thrift -&gt;&gt;+ TSIService : getResult
TSIService -&gt;&gt;+ TSServiceImpl : executeStatement
end

opt deviceId: root.yuzhouwan, time: 1, measurements: [value], values: [1.0]
TSServiceImpl -&gt;&gt;+ Planner : parseSQLToPhysicalPlan
Planner -&gt;&gt;- TSServiceImpl : PhysicalPlan

TSServiceImpl -&gt;&gt;+ TSServiceImpl : executeUpdateStatement
TSServiceImpl -&gt;&gt;+ TSServiceImpl : executeNonQueryPlan
TSServiceImpl -&gt;&gt;+ TSServiceImpl : executeNonQuery

TSServiceImpl -&gt;&gt; PlanExecutor : processNonQuery
PlanExecutor -&gt;&gt; StorageEngine : insert
StorageEngine -&gt;&gt; StorageGroupProcessor : insert
StorageGroupProcessor -&gt;&gt; StorageGroupProcessor : insert

StorageGroupProcessor -&gt;&gt;+ StorageGroupProcessor : writeLock


opt MemTable
StorageGroupProcessor -&gt;&gt;+ StorageEngine : getTimePartition

alt enable_partition is true
StorageEngine -&gt;&gt; StorageEngine : time / timePartitionInterval
else
StorageEngine -&gt;&gt; StorageEngine : 0
end

alt !isSequence &amp;&amp; time &gt; lastFlushTime &amp;&amp; enable_discard_out_of_order_data is true
StorageGroupProcessor --&gt;&gt; TSServiceImpl : return
end

StorageEngine -&gt;&gt;- StorageGroupProcessor : long timePartitionId

StorageGroupProcessor -&gt;&gt; StorageGroupProcessor : insertToTsFileProcessor
StorageGroupProcessor -&gt;&gt; TsFileProcessor : insert
TsFileProcessor -&gt;&gt; AbstractMemTable : insert
AbstractMemTable -&gt;&gt;+ InsertRowPlan : getIndex
InsertRowPlan -&gt;&gt;- AbstractMemTable : long index
AbstractMemTable -&gt;&gt; AbstractMemTable : updatePlanIndexes
AbstractMemTable -&gt;&gt; AbstractMemTable : write
AbstractMemTable -&gt;&gt;+ AbstractMemTable : createIfNotExistAndGet
AbstractMemTable -&gt;&gt;- AbstractMemTable : IWritableMemChunk
AbstractMemTable -&gt;&gt; WritableMemChunk : write(insertTime, objectValue)

WritableMemChunk -&gt;&gt;+ MeasurementSchema : getType
MeasurementSchema -&gt;&gt;- WritableMemChunk : TSDataType

alt BOOLEAN
WritableMemChunk -&gt;&gt; WritableMemChunk : putBoolean
else INT32
WritableMemChunk -&gt;&gt; WritableMemChunk : putInt
else INT64
WritableMemChunk -&gt;&gt; WritableMemChunk : putLong
else FLOAT
WritableMemChunk -&gt;&gt; WritableMemChunk : putFloat
else DOUBLE
WritableMemChunk -&gt;&gt; WritableMemChunk : putDouble
else TEXT
WritableMemChunk -&gt;&gt; WritableMemChunk : putBinary
end

WritableMemChunk -&gt;&gt; TVList : putFloat
end


alt enable_wal is true
opt WAL
TsFileProcessor -&gt;&gt;+ TsFileProcessor : getLogNode
TsFileProcessor -&gt;&gt;- TsFileProcessor : WriteLogNode
TsFileProcessor -&gt;&gt; ExclusiveWriteLogNode : write

ExclusiveWriteLogNode -&gt;&gt; ExclusiveWriteLogNode : putLog

alt &gt;= flush_wal_threshold
ExclusiveWriteLogNode -&gt;&gt; ExclusiveWriteLogNode : sync
end

end
end


opt Flush
StorageGroupProcessor -&gt;&gt;+ TsFileProcessor : shouldFlush
TsFileProcessor -&gt;&gt;- StorageGroupProcessor : boolean

alt memSize of memtable &gt;= memtable_size_threshold or pointNum of memtable &gt;= avg_series_point_number_threshold
StorageGroupProcessor -&gt;&gt; TsFileFlushPolicy : apply
TsFileFlushPolicy -&gt;&gt;+ TsFileProcessor : shouldClose
TsFileProcessor -&gt;&gt;- TsFileFlushPolicy : boolean
alt shouldClose is true
TsFileFlushPolicy -&gt;&gt; StorageGroupProcessor : asyncCloseOneTsFileProcessor
else
TsFileFlushPolicy -&gt;&gt; TsFileProcessor : asyncFlush
end
end

end



StorageGroupProcessor -&gt;&gt;- StorageGroupProcessor : writeUnlock

StorageGroupProcessor --&gt;&gt; TSServiceImpl : may throw exception
end

TSServiceImpl -&gt;&gt;- TSServiceImpl : boolean succ
TSServiceImpl -&gt;&gt;- TSServiceImpl : TSStatus
TSServiceImpl -&gt;&gt;- TSServiceImpl : TSExecuteStatementResp
TSServiceImpl -&gt;&gt;- TSIService : TSExecuteStatementResp
TSIService -&gt;&gt;- Thrift : executeStatement_result</pre>

<div class="note success">点击<a href="/picture/iotdb/apache_iotdb_write.svg" target="_blank">这里</a>查看完整大图</div>
<div class="note info">写入数据时，时间粒度支持 ms / us / ns 三种，默认为 ms，且存储时间粒度统一为 ms</div>
<div class="note info">参数 enable_partition 控制是否 partition 分区，默认为 false</div>
<div class="note info">参数 enable_discard_out_of_order_data 控制是否丢弃乱序数据，默认为 false</div>
<div class="note info">参数 enable_wal 控制是否开启写 WAL 日志，默认为 true</div>
<div class="note info">参数 flush_wal_threshold 控制 MemTable 中缓存了多少条记录后，才会同步到 WAL 日志文件中，默认为 10000</div>
<div class="note info">参数 memtable_size_threshold 控制 MemTable 中缓存占用多大内存后，才会 Flush 到 TSFile 数据文件中，默认为 1G</div>
<div class="note info">参数 avg_series_point_number_threshold 控制 MemTable 中缓存了多少条记录后，才会 Flush 到 TSFile 数据文件中，默认为 100000</div>



<h3 id="查询链路"><a href="#查询链路" class="headerlink" title="查询链路"></a>查询链路</h3><pre class="mermaid">sequenceDiagram

participant Thrift
participant TSIService
participant TSServiceImpl
participant Planner
participant PhysicalPlan
participant QueryPlan
participant RawDataQueryPlan
participant IPlanExecutor
participant IQueryRouter
participant RawDataQueryExecutor
participant RawQueryDataSetWithoutValueFilter
participant RawQueryDataSetWithoutValueFilter.ReadTask
participant IBatchReader
participant TSQueryDataSet
participant TSExecuteStatementResp

opt select * from root.*
Thrift -&gt;&gt;+ TSIService : getResult
TSIService -&gt;&gt;+ TSServiceImpl : requestStatementId
TSServiceImpl -&gt;&gt;- TSIService : long statementId

TSIService -&gt;&gt;+ TSServiceImpl : executeStatement


TSServiceImpl -&gt;&gt;+ Planner : parseSQLToPhysicalPlan
Planner -&gt;&gt;- TSServiceImpl : PhysicalPlan
TSServiceImpl -&gt;&gt;+ PhysicalPlan : isQuery
PhysicalPlan -&gt;&gt;- TSServiceImpl : boolean
alt isQuery
TSServiceImpl -&gt;&gt;+ TSServiceImpl : internalExecuteQueryStatement
TSServiceImpl -&gt;&gt;+ TSServiceImpl : getQueryResp
TSServiceImpl -&gt;&gt;+ TSServiceImpl : getQueryColumnHeaders

TSServiceImpl -&gt;&gt;+ TSServiceImpl : getWideQueryHeaders

opt root.yuzhouwan.value
TSServiceImpl -&gt;&gt;+ QueryPlan : getPaths
QueryPlan -&gt;&gt;- TSServiceImpl : list of PartialPath
end

TSServiceImpl -&gt;&gt;+ TSServiceImpl : getSeriesTypeByPath
TSServiceImpl -&gt;&gt;- TSServiceImpl : TSDataType

TSServiceImpl --&gt;&gt;- TSServiceImpl : list of respColumns and list of columnTypes
end


alt plan instanceof is true
TSServiceImpl -&gt;&gt;+ RawDataQueryPlan : getDeduplicatedPaths().size()
RawDataQueryPlan -&gt;&gt;- TSServiceImpl : long deduplicatedPathNum
end

TSServiceImpl -&gt;&gt;+ TSServiceImpl : generateQueryId
TSServiceImpl -&gt;&gt;- TSServiceImpl : long queryId

TSServiceImpl -&gt;&gt;+ TSServiceImpl : createQueryDataSet

alt execute query
TSServiceImpl -&gt;&gt;+ IPlanExecutor : processQuery
IPlanExecutor -&gt;&gt;+ IPlanExecutor : processDataQuery
IPlanExecutor -&gt;&gt;+ IQueryRouter : rawDataQuery
IQueryRouter -&gt;&gt;+ RawDataQueryExecutor : executeWithoutValueFilter
RawDataQueryExecutor -&gt;&gt;+ RawQueryDataSetWithoutValueFilter : new
RawQueryDataSetWithoutValueFilter -&gt;&gt; RawQueryDataSetWithoutValueFilter : init
RawQueryDataSetWithoutValueFilter -&gt;&gt;+ RawQueryDataSetWithoutValueFilter.ReadTask : new
RawQueryDataSetWithoutValueFilter.ReadTask -&gt;&gt;- RawQueryDataSetWithoutValueFilter : RawQueryDataSetWithoutValueFilter.ReadTask
RawQueryDataSetWithoutValueFilter.ReadTask -&gt;&gt; RawQueryDataSetWithoutValueFilter.ReadTask : runMayThrow
RawQueryDataSetWithoutValueFilter.ReadTask -&gt;&gt;+ IBatchReader : nextBatch
IBatchReader -&gt;&gt;- RawQueryDataSetWithoutValueFilter.ReadTask : BatchData
RawQueryDataSetWithoutValueFilter -&gt;&gt; RawQueryDataSetWithoutValueFilter : fillCache
RawQueryDataSetWithoutValueFilter -&gt;&gt;- RawDataQueryExecutor : QueryDataSet
RawDataQueryExecutor -&gt;&gt;- IQueryRouter : QueryDataSet
IQueryRouter -&gt;&gt;- IPlanExecutor : QueryDataSet
IPlanExecutor -&gt;&gt;- IPlanExecutor : QueryDataSet
IPlanExecutor -&gt;&gt;- TSServiceImpl : QueryDataSet
end

TSServiceImpl -&gt;&gt;- TSServiceImpl : QueryDataSet

alt build result
TSServiceImpl -&gt;&gt;+ TSServiceImpl : fillRpcReturnData
TSServiceImpl -&gt;&gt;+ RawQueryDataSetWithoutValueFilter : fillBuffer
RawQueryDataSetWithoutValueFilter -&gt;&gt; TSQueryDataSet : setTime
RawQueryDataSetWithoutValueFilter -&gt;&gt; TSQueryDataSet : setValueList
RawQueryDataSetWithoutValueFilter -&gt;&gt; TSQueryDataSet : setBitmapList
RawQueryDataSetWithoutValueFilter -&gt;&gt;- TSServiceImpl : TSQueryDataSet

TSServiceImpl -&gt;&gt; TSExecuteStatementResp : setQueryDataSet
TSServiceImpl -&gt;&gt; TSExecuteStatementResp : setQueryId

TSServiceImpl -&gt;&gt;- TSServiceImpl : TSQueryDataSet
end

TSServiceImpl -&gt;&gt;- TSServiceImpl : TSExecuteStatementResp
TSServiceImpl -&gt;&gt;- TSServiceImpl : TSExecuteStatementResp
TSServiceImpl -&gt;&gt;- TSServiceImpl : TSExecuteStatementResp
TSServiceImpl -&gt;&gt;- TSIService : TSExecuteStatementResp
end

TSIService -&gt;&gt;- Thrift : requestStatementId_result</pre>

<div class="note success">点击<a href="/picture/iotdb/apache_iotdb_read.svg" target="_blank">这里</a>查看完整大图</div>



<h3 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tree</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── data</span><br><span class="line">│&nbsp;&nbsp; ├── sequence</span><br><span class="line">│&nbsp;&nbsp; │&nbsp;&nbsp; └── root.ln</span><br><span class="line">│&nbsp;&nbsp; │&nbsp;&nbsp;     └── 0</span><br><span class="line">│&nbsp;&nbsp; │&nbsp;&nbsp;         └── 1606030145164-1-0.tsfile</span><br><span class="line">│&nbsp;&nbsp; └── unsequence</span><br><span class="line">├── system</span><br><span class="line">│&nbsp;&nbsp; ├── roles</span><br><span class="line">│&nbsp;&nbsp; ├── schema</span><br><span class="line">│&nbsp;&nbsp; │&nbsp;&nbsp; ├── mlog.txt</span><br><span class="line">│&nbsp;&nbsp; │&nbsp;&nbsp; ├── system.properties</span><br><span class="line">│&nbsp;&nbsp; │&nbsp;&nbsp; └── tlog.txt</span><br><span class="line">│&nbsp;&nbsp; ├── storage_groups</span><br><span class="line">│&nbsp;&nbsp; │&nbsp;&nbsp; └── root.ln</span><br><span class="line">│&nbsp;&nbsp; │&nbsp;&nbsp;     ├── 0</span><br><span class="line">│&nbsp;&nbsp; │&nbsp;&nbsp;     │&nbsp;&nbsp; └── Version-100</span><br><span class="line">│&nbsp;&nbsp; │&nbsp;&nbsp;     └── upgrade</span><br><span class="line">│&nbsp;&nbsp; │&nbsp;&nbsp;         └── Version-100</span><br><span class="line">│&nbsp;&nbsp; ├── upgrade</span><br><span class="line">│&nbsp;&nbsp; │&nbsp;&nbsp; └── upgrade.txt</span><br><span class="line">│&nbsp;&nbsp; └── users</span><br><span class="line">│&nbsp;&nbsp;     └── root.profile</span><br><span class="line">└── wal</span><br><span class="line">    └── root.ln-1606030145164-1-0.tsfile</span><br><span class="line">        └── wal1</span><br><span class="line"></span><br><span class="line">16 directories, 9 files</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cat system/schema/mlog.txt</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2,root.ln</span><br><span class="line">0,root.ln.wf01.wt01.status,0,2,1,,,</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cat system/schema/system.properties</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#System properties:</span></span><br><span class="line"><span class="comment">#Sun Nov 22 15:28:58 CST 2020</span></span><br><span class="line"><span class="attr">partition_interval</span>=<span class="string">9223372036854775807</span></span><br><span class="line"><span class="attr">timestamp_precision</span>=<span class="string">ms</span></span><br><span class="line"><span class="attr">tsfile_storage_fs</span>=<span class="string">LOCAL</span></span><br><span class="line"><span class="attr">enable_partition</span>=<span class="string">false</span></span><br><span class="line"><span class="attr">max_degree_of_index_node</span>=<span class="string">1024</span></span><br><span class="line"><span class="attr">tag_attribute_total_size</span>=<span class="string">700</span></span><br><span class="line"><span class="attr">iotdb_version</span>=<span class="string">UNKNOWN</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cat system/users/root.profile</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rootc���{��Pykd��HE%</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cat wal/root.ln-1606030145164-1-0.tsfile/wal1</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">8droot.ln.wf01.wt01status�O�f%</span><br></pre></td></tr></tbody></table></figure>
<h3 id="压缩策略"><a href="#压缩策略" class="headerlink" title="压缩策略"></a>压缩策略</h3><ul>
<li>LevelCompactionTsFileManagement</li>
<li>NoCompactionTsFileManagement</li>
</ul>
<h2 id="性能压测"><a href="#性能压测" class="headerlink" title="性能压测"></a>性能压测</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> --depth 1 --single-branch --branch master https://github.com/thulab/iotdb-benchmark</span><br><span class="line">$ <span class="built_in">cd</span> iotdb-benchmark</span><br><span class="line">$ mvn clean package -Dmaven.test.skip=<span class="literal">true</span></span><br><span class="line">$ mkdir ../lib</span><br><span class="line">$ find . -name <span class="string">'*jar'</span> -<span class="built_in">type</span> f -<span class="built_in">exec</span> <span class="built_in">echo</span> {} \; -<span class="built_in">exec</span> cp {} ../lib/ \;</span><br><span class="line">$ mv ../lib .</span><br><span class="line">$ ./benchmark.sh</span><br></pre></td></tr></tbody></table></figure>
<h2 id="踩过的坑"><a href="#踩过的坑" class="headerlink" title="踩过的坑"></a>踩过的坑</h2><h3 id="Cannot-connect-to-node-Node"><a href="#Cannot-connect-to-node-Node" class="headerlink" title="Cannot connect to node Node"></a>Cannot connect to node Node</h3><h4 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">---------------------</span><br><span class="line"><span class="function">Starting <span class="title">IoTDB</span> <span class="params">(Cluster Mode)</span></span></span><br><span class="line"><span class="function">---------------------</span></span><br><span class="line"><span class="function">Maximum memory allocation pool </span>= <span class="number">4096</span>MB, initial memory allocation pool = <span class="number">800</span>MB</span><br><span class="line">If you want to change <span class="keyword">this</span> configuration, please check conf/iotdb-env.sh(Unix or OS X, <span class="keyword">if</span> you use Windows, check conf/iotdb-env.bat).</span><br><span class="line"><span class="number">2020</span>-<span class="number">12</span>-<span class="number">01</span> <span class="number">17</span>:<span class="number">12</span>:<span class="number">58</span>,<span class="number">126</span> [main] INFO  org.apache.iotdb.cluster.config.ClusterDescriptor:<span class="number">191</span> - Start to read config file sbin/../conf/iotdb-cluster.properties</span><br><span class="line"><span class="number">2020</span>-<span class="number">12</span>-<span class="number">01</span> <span class="number">17</span>:<span class="number">12</span>:<span class="number">58</span>,<span class="number">159</span> [main] INFO  org.apache.iotdb.db.conf.IoTDBDescriptor:<span class="number">148</span> - Start to read config file file:sbin/../conf/iotdb-engine.properties</span><br><span class="line"><span class="number">2020</span>-<span class="number">12</span>-<span class="number">01</span> <span class="number">17</span>:<span class="number">12</span>:<span class="number">58</span>,<span class="number">161</span> [main] INFO  org.apache.iotdb.db.conf.IoTDBDescriptor:<span class="number">803</span> - allocateMemoryForRead = <span class="number">347078656</span></span><br><span class="line"><span class="number">2020</span>-<span class="number">12</span>-<span class="number">01</span> <span class="number">17</span>:<span class="number">12</span>:<span class="number">58</span>,<span class="number">161</span> [main] INFO  org.apache.iotdb.db.conf.IoTDBDescriptor:<span class="number">804</span> - allocateMemoryForWrite = <span class="number">2429550592</span></span><br><span class="line"><span class="number">2020</span>-<span class="number">12</span>-<span class="number">01</span> <span class="number">17</span>:<span class="number">12</span>:<span class="number">58</span>,<span class="number">161</span> [main] INFO  org.apache.iotdb.db.conf.IoTDBDescriptor:<span class="number">805</span> - allocateMemoryForSchema = <span class="number">347078656</span></span><br><span class="line"><span class="number">2020</span>-<span class="number">12</span>-<span class="number">01</span> <span class="number">17</span>:<span class="number">12</span>:<span class="number">58</span>,<span class="number">162</span> [main] INFO  org.apache.iotdb.db.conf.IoTDBDescriptor:<span class="number">247</span> - IoTDB enable memory control: <span class="keyword">true</span></span><br><span class="line"><span class="number">2020</span>-<span class="number">12</span>-<span class="number">01</span> <span class="number">17</span>:<span class="number">12</span>:<span class="number">58</span>,<span class="number">166</span> [main] INFO  org.apache.iotdb.tsfile.common.conf.TSFileDescriptor:<span class="number">108</span> - Start to read config file sbin/../conf/iotdb-engine.properties</span><br><span class="line"><span class="number">2020</span>-<span class="number">12</span>-<span class="number">01</span> <span class="number">17</span>:<span class="number">12</span>:<span class="number">58</span>,<span class="number">168</span> [main] INFO  org.apache.iotdb.cluster.ClusterMain:<span class="number">90</span> - Running mode -s</span><br><span class="line"><span class="number">2020</span>-<span class="number">12</span>-<span class="number">01</span> <span class="number">17</span>:<span class="number">12</span>:<span class="number">58</span>,<span class="number">250</span> [main] INFO  org.apache.iotdb.db.engine.version.SimpleFileVersionController:<span class="number">115</span> - Version file updated, previous: /Users/benedictjin/apps/iotdb/cluster/sbin/../data/system/raftLog/<span class="number">0</span>/upgrade/Version-<span class="number">100</span>, current: /Users/benedictjin/apps/iotdb/cluster/sbin/../data/system/raftLog/<span class="number">0</span>/upgrade/Version-<span class="number">200</span></span><br><span class="line"><span class="number">2020</span>-<span class="number">12</span>-<span class="number">01</span> <span class="number">17</span>:<span class="number">12</span>:<span class="number">58</span>,<span class="number">252</span> [main] INFO  org.apache.iotdb.cluster.log.manage.serializable.SyncLogDequeSerializer:<span class="number">786</span> - Recovered log meta: LogManagerMeta{ commitLogTerm=-<span class="number">1</span>, commitLogIndex=-<span class="number">1</span>, lastLogIndex=-<span class="number">1</span>, lastLogTerm=-<span class="number">1</span>, maxHaveAppliedCommitIndex=-<span class="number">1</span>}, availableVersion: [<span class="number">0</span>,<span class="number">9223372036854775807</span>], state: HardState{currentTerm=<span class="number">0</span>, voteFor=<span class="keyword">null</span>}</span><br><span class="line"><span class="number">2020</span>-<span class="number">12</span>-<span class="number">01</span> <span class="number">17</span>:<span class="number">12</span>:<span class="number">58</span>,<span class="number">253</span> [main] INFO  org.apache.iotdb.cluster.log.manage.serializable.SyncLogDequeSerializer:<span class="number">482</span> - Find log type =idx log files [sbin/../data/system/raftLog/<span class="number">0</span>/<span class="number">0</span>-<span class="number">9223372036854775807</span>-<span class="number">101</span>-idx]</span><br><span class="line"><span class="number">2020</span>-<span class="number">12</span>-<span class="number">01</span> <span class="number">17</span>:<span class="number">12</span>:<span class="number">58</span>,<span class="number">260</span> [main] INFO  org.apache.iotdb.cluster.log.manage.serializable.SyncLogDequeSerializer:<span class="number">482</span> - Find log type =data log files [sbin/../data/system/raftLog/<span class="number">0</span>/<span class="number">0</span>-<span class="number">9223372036854775807</span>-<span class="number">101</span>-data]</span><br><span class="line"><span class="number">2020</span>-<span class="number">12</span>-<span class="number">01</span> <span class="number">17</span>:<span class="number">12</span>:<span class="number">58</span>,<span class="number">261</span> [main] INFO  org.apache.iotdb.cluster.log.manage.serializable.SyncLogDequeSerializer:<span class="number">546</span> - no log index file to recover</span><br><span class="line"><span class="number">2020</span>-<span class="number">12</span>-<span class="number">01</span> <span class="number">17</span>:<span class="number">12</span>:<span class="number">58</span>,<span class="number">269</span> [main] INFO  org.apache.iotdb.cluster.server.member.MetaGroupMember:<span class="number">1267</span> - Recovered node identifier <span class="number">356238364</span></span><br><span class="line"><span class="number">2020</span>-<span class="number">12</span>-<span class="number">01</span> <span class="number">17</span>:<span class="number">12</span>:<span class="number">58</span>,<span class="number">270</span> [main] INFO  org.apache.iotdb.cluster.server.member.MetaGroupMember:<span class="number">1294</span> - The identifier of <span class="keyword">this</span> node has been set to <span class="number">356238364</span></span><br><span class="line">2020-12-01 17:12:58,307 [main] INFO  org.apache.iotdb.db.auth.authorizer.BasicAuthorizer$InstanceHolder:87 - Authorizer provider class: org.apache.iotdb.db.auth.authorizer.LocalFileAuthorizer</span><br><span class="line"><span class="number">2020</span>-<span class="number">12</span>-<span class="number">01</span> <span class="number">17</span>:<span class="number">12</span>:<span class="number">58</span>,<span class="number">313</span> [main] INFO  org.apache.iotdb.db.auth.user.BasicUserManager:<span class="number">79</span> - Admin initialized</span><br><span class="line"><span class="number">2020</span>-<span class="number">12</span>-<span class="number">01</span> <span class="number">17</span>:<span class="number">12</span>:<span class="number">58</span>,<span class="number">316</span> [main] INFO  org.apache.iotdb.db.auth.user.BasicUserManager:<span class="number">79</span> - Admin initialized</span><br><span class="line"><span class="number">2020</span>-<span class="number">12</span>-<span class="number">01</span> <span class="number">17</span>:<span class="number">12</span>:<span class="number">58</span>,<span class="number">316</span> [main] INFO  org.apache.iotdb.db.auth.authorizer.BasicAuthorizer:<span class="number">67</span> - Initialization of Authorizer completes</span><br><span class="line"><span class="number">2020</span>-<span class="number">12</span>-<span class="number">01</span> <span class="number">17</span>:<span class="number">12</span>:<span class="number">58</span>,<span class="number">329</span> [main] INFO  org.apache.iotdb.cluster.server.member.MetaGroupMember:<span class="number">1189</span> - No partition table file found</span><br><span class="line"><span class="number">2020</span>-<span class="number">12</span>-<span class="number">01</span> <span class="number">17</span>:<span class="number">12</span>:<span class="number">58</span>,<span class="number">334</span> [main] INFO  org.apache.iotdb.cluster.server.RaftServer:<span class="number">220</span> - <span class="function">Cluster node <span class="title">Node</span><span class="params">(ip:<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>, metaPort:<span class="number">9003</span>, nodeIdentifier:<span class="number">356238364</span>, dataPort:<span class="number">40010</span>, clientPort:<span class="number">55560</span>)</span> begins to set up</span></span><br><span class="line"><span class="function">2020-12-01 17:12:58,348 [main] INFO  org.apache.iotdb.cluster.server.RaftServer:231 - Cluster node <span class="title">Node</span><span class="params">(ip:<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>, metaPort:<span class="number">9003</span>, nodeIdentifier:<span class="number">356238364</span>, dataPort:<span class="number">40010</span>, clientPort:<span class="number">55560</span>)</span> is up</span></span><br><span class="line"><span class="function">2020-12-01 17:12:58,349 [main] INFO  org.apache.iotdb.cluster.server.heartbeat.HeartbeatServer:201 - Cluster node's heartbeat <span class="title">Node</span><span class="params">(ip:<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>, metaPort:<span class="number">9003</span>, nodeIdentifier:<span class="number">356238364</span>, dataPort:<span class="number">40010</span>, clientPort:<span class="number">55560</span>)</span> begins to set up</span></span><br><span class="line"><span class="function">2020-12-01 17:12:58,350 [main] INFO  org.apache.iotdb.cluster.server.heartbeat.HeartbeatServer:213 - Cluster node's heartbeat <span class="title">Node</span><span class="params">(ip:<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>, metaPort:<span class="number">9003</span>, nodeIdentifier:<span class="number">356238364</span>, dataPort:<span class="number">40010</span>, clientPort:<span class="number">55560</span>)</span> is up</span></span><br><span class="line"><span class="function">2020-12-01 17:12:58,361 [main] WARN  org.apache.iotdb.db.service.StartupChecks:35 - iotdb.jmx.port missing from iotdb-env.<span class="title">sh</span><span class="params">(Unix or OS X, <span class="keyword">if</span> you use Windows, check conf/iotdb-env.bat)</span></span></span><br><span class="line"><span class="function">2020-12-01 17:12:58,361 [main] INFO  org.apache.iotdb.db.service.StartupChecks:50 - JDK veriosn is 8.</span></span><br><span class="line"><span class="function">2020-12-01 17:12:58,361 [main] INFO  org.apache.iotdb.db.service.IoTDB:95 - Setting up IoTDB...</span></span><br><span class="line"><span class="function">2020-12-01 17:12:58,362 [main] INFO  org.apache.iotdb.db.service.IoTDB:99 - recover the schema...</span></span><br><span class="line"><span class="function">2020-12-01 17:12:58,402 [main] INFO  org.apache.iotdb.db.service.IoTDB:151 - spend 40ms to recover schema.</span></span><br><span class="line"><span class="function">2020-12-01 17:12:58,402 [main] INFO  org.apache.iotdb.db.service.IoTDB:152 - After initializing, tsFile threshold is 0, memtableSize is 134217728</span></span><br><span class="line"><span class="function">2020-12-01 17:12:58,407 [main] INFO  org.apache.iotdb.db.concurrent.IoTDBThreadPoolFactory:46 - new fixed thread pool: Flush-ServerServiceImpl, thread number: 8</span></span><br><span class="line"><span class="function">2020-12-01 17:12:58,409 [main] INFO  org.apache.iotdb.db.concurrent.IoTDBThreadPoolFactory:80 - new cached thread pool: Flush-SubTask-ServerServiceImpl</span></span><br><span class="line"><span class="function">2020-12-01 17:12:58,409 [main] INFO  org.apache.iotdb.db.engine.flush.pool.FlushSubTaskPoolManager:57 - Flush sub task manager started.</span></span><br><span class="line"><span class="function">2020-12-01 17:12:58,409 [main] INFO  org.apache.iotdb.db.engine.flush.pool.FlushTaskPoolManager:58 - Flush task manager started.</span></span><br><span class="line"><span class="function">2020-12-01 17:12:58,414 [main] INFO  org.apache.iotdb.db.cost.statistic.Measurement:142 - start measurement stats <span class="keyword">module</span>...</span></span><br><span class="line"><span class="function">2020-12-01 17:12:58,415 [main] INFO  org.apache.iotdb.db.cost.statistic.Measurement:250 - start the consuming task in the measurement stats <span class="keyword">module</span>...</span></span><br><span class="line"><span class="function">2020-12-01 17:12:58,422 [main] INFO  org.apache.iotdb.db.concurrent.IoTDBThreadPoolFactory:46 - new fixed thread pool: Recovery-Thread-Pool, thread number: 8</span></span><br><span class="line"><span class="function">2020-12-01 17:12:58,427 [main] INFO  org.apache.iotdb.db.concurrent.IoTDBThreadPoolFactory:63 - new single thread pool: Begin-Recovery-Pool</span></span><br><span class="line"><span class="function">2020-12-01 17:12:58,430 [main] INFO  org.apache.iotdb.db.service.thrift.ThriftService:99 - IoTDB: start RPC ServerService...</span></span><br><span class="line"><span class="function">2020-12-01 17:12:58,441 [RPC-ServerServiceImpl] INFO  org.apache.iotdb.db.service.thrift.ThriftServiceThread:125 - The RPC ServerService service thread begin to run...</span></span><br><span class="line"><span class="function">2020-12-01 17:12:58,544 [main] INFO  org.apache.iotdb.db.service.thrift.ThriftService:117 - IoTDB: start RPC ServerService successfully, listening on ip 0.0.0.0 port 6667</span></span><br><span class="line"><span class="function">2020-12-01 17:12:58,544 [main] INFO  org.apache.iotdb.db.service.IoTDB:118 - IoTDB is set up, now may some sgs are not ready, please wait several seconds...</span></span><br><span class="line"><span class="function">2020-12-01 17:12:58,554 [main] INFO  org.apache.iotdb.db.service.UpgradeSevice:112 - finish counting upgrading files, total num:0</span></span><br><span class="line"><span class="function">2020-12-01 17:12:58,554 [main] INFO  org.apache.iotdb.db.service.UpgradeSevice:73 - Waiting <span class="keyword">for</span> upgrade task pool to shut down</span></span><br><span class="line"><span class="function">2020-12-01 17:12:58,554 [main] INFO  org.apache.iotdb.db.service.UpgradeSevice:78 - Upgrade service stopped</span></span><br><span class="line"><span class="function">2020-12-01 17:12:58,565 [main] INFO  org.apache.iotdb.db.engine.merge.manage.MergeManager:154 - MergeManager started</span></span><br><span class="line"><span class="function">2020-12-01 17:12:58,566 [main] INFO  org.apache.iotdb.db.engine.compaction.CompactionMergeTaskPoolManager:57 - Compaction task manager started.</span></span><br><span class="line"><span class="function">2020-12-01 17:12:58,566 [main] INFO  org.apache.iotdb.db.service.IoTDB:137 - Congratulation, IoTDB is set up successfully. Now, enjoy yourself!</span></span><br><span class="line"><span class="function">2020-12-01 17:12:58,566 [main] INFO  org.apache.iotdb.db.service.IoTDB:91 - IoTDB has started.</span></span><br><span class="line"><span class="function">2020-12-01 17:12:58,569 [main] INFO  org.apache.iotdb.cluster.server.member.RaftMember:282 - Meta started</span></span><br><span class="line"><span class="function">2020-12-01 17:13:03,578 [pool-12-thread-1] WARN  org.apache.iotdb.cluster.server.member.MetaGroupMember:1005 - Start up exception. Cannot connect to node <span class="title">Node</span><span class="params">(ip:<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>, metaPort:<span class="number">9005</span>, nodeIdentifier:<span class="number">0</span>, dataPort:<span class="number">40012</span>, clientPort:<span class="number">55561</span>)</span>. Try again in next turn.</span></span><br><span class="line"><span class="function">2020-12-01 17:13:03,578 [pool-12-thread-2] WARN  org.apache.iotdb.cluster.server.member.MetaGroupMember:1005 - Start up exception. Cannot connect to node <span class="title">Node</span><span class="params">(ip:<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>, metaPort:<span class="number">9007</span>, nodeIdentifier:<span class="number">0</span>, dataPort:<span class="number">40014</span>, clientPort:<span class="number">55562</span>)</span>. Try again in next turn.</span></span><br></pre></td></tr></tbody></table></figure>
<h4 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h4><p>　检查 <code>conf/iotdb-cluster.properties</code> 配置文件中 <code>seed_nodes</code> 是否都正常启动</p>
<h3 id="org-apache-maven-wagon-TransferFailedException-Transfer-failed"><a href="#org-apache-maven-wagon-TransferFailedException-Transfer-failed" class="headerlink" title="org.apache.maven.wagon.TransferFailedException: Transfer failed"></a>org.apache.maven.wagon.TransferFailedException: Transfer failed</h3><h4 id="描述-1"><a href="#描述-1" class="headerlink" title="描述"></a>描述</h4><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./mvnw.sh clean install -P mac</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">org.apache.maven.wagon.TransferFailedException: Transfer failed <span class="keyword">for</span> https:<span class="comment">//github.com/jt2594838/mvn-thrift-compiler/raw/master/thrift_0.12.0_0.13.0_mac.exe</span></span><br><span class="line">    at org.apache.maven.wagon.providers.http.wagon.shared.AbstractHttpClientWagon.fillInputData (AbstractHttpClientWagon.java:<span class="number">1242</span>)</span><br><span class="line">    at org.apache.maven.wagon.providers.http.wagon.shared.AbstractHttpClientWagon.fillInputData (AbstractHttpClientWagon.java:<span class="number">1138</span>)</span><br><span class="line">    at org.apache.maven.wagon.StreamWagon.getInputStream (StreamWagon.java:<span class="number">126</span>)</span><br><span class="line">    at org.apache.maven.wagon.StreamWagon.getIfNewer (StreamWagon.java:<span class="number">88</span>)</span><br><span class="line">    at org.apache.maven.wagon.StreamWagon.get (StreamWagon.java:<span class="number">61</span>)</span><br><span class="line">    at com.googlecode.download.maven.plugin.internal.WGet.doGet (WGet.java:<span class="number">377</span>)</span><br><span class="line">    at com.googlecode.download.maven.plugin.internal.WGet.execute (WGet.java:<span class="number">282</span>)</span><br><span class="line">    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:<span class="number">137</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:<span class="number">210</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:<span class="number">156</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:<span class="number">148</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:<span class="number">117</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.builder.multithreaded.MultiThreadedBuilder$<span class="number">1.</span>call (MultiThreadedBuilder.java:<span class="number">190</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.builder.multithreaded.MultiThreadedBuilder$<span class="number">1.</span>call (MultiThreadedBuilder.java:<span class="number">186</span>)</span><br><span class="line">    at java.util.concurrent.FutureTask.run (FutureTask.java:<span class="number">266</span>)</span><br><span class="line">    at java.util.concurrent.Executors$RunnableAdapter.call (Executors.java:<span class="number">511</span>)</span><br><span class="line">    at java.util.concurrent.FutureTask.run (FutureTask.java:<span class="number">266</span>)</span><br><span class="line">    at java.util.concurrent.ThreadPoolExecutor.runWorker (ThreadPoolExecutor.java:<span class="number">1149</span>)</span><br><span class="line">    at java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:<span class="number">624</span>)</span><br><span class="line">    at java.lang.Thread.run (Thread.java:<span class="number">748</span>)</span><br><span class="line">Caused by: javax.net.ssl.SSLHandshakeException: Remote host closed connection during handshake</span><br><span class="line">    at sun.security.ssl.SSLSocketImpl.readRecord (SSLSocketImpl.java:<span class="number">994</span>)</span><br><span class="line">    at sun.security.ssl.SSLSocketImpl.performInitialHandshake (SSLSocketImpl.java:<span class="number">1367</span>)</span><br><span class="line">    at sun.security.ssl.SSLSocketImpl.startHandshake (SSLSocketImpl.java:<span class="number">1395</span>)</span><br><span class="line">    at sun.security.ssl.SSLSocketImpl.startHandshake (SSLSocketImpl.java:<span class="number">1379</span>)</span><br><span class="line">    at org.apache.maven.wagon.providers.http.httpclient.conn.ssl.SSLConnectionSocketFactory.createLayeredSocket (SSLConnectionSocketFactory.java:<span class="number">436</span>)</span><br><span class="line">    at org.apache.maven.wagon.providers.http.httpclient.conn.ssl.SSLConnectionSocketFactory.connectSocket (SSLConnectionSocketFactory.java:<span class="number">384</span>)</span><br><span class="line">    at org.apache.maven.wagon.providers.http.httpclient.impl.conn.DefaultHttpClientConnectionOperator.connect (DefaultHttpClientConnectionOperator.java:<span class="number">142</span>)</span><br><span class="line">    at org.apache.maven.wagon.providers.http.httpclient.impl.conn.PoolingHttpClientConnectionManager.connect (PoolingHttpClientConnectionManager.java:<span class="number">374</span>)</span><br><span class="line">    at org.apache.maven.wagon.providers.http.httpclient.impl.execchain.MainClientExec.establishRoute (MainClientExec.java:<span class="number">393</span>)</span><br><span class="line">    at org.apache.maven.wagon.providers.http.httpclient.impl.execchain.MainClientExec.execute (MainClientExec.java:<span class="number">236</span>)</span><br><span class="line">    at org.apache.maven.wagon.providers.http.httpclient.impl.execchain.ProtocolExec.execute (ProtocolExec.java:<span class="number">186</span>)</span><br><span class="line">    at org.apache.maven.wagon.providers.http.httpclient.impl.execchain.RetryExec.execute (RetryExec.java:<span class="number">89</span>)</span><br><span class="line">    at org.apache.maven.wagon.providers.http.httpclient.impl.execchain.RedirectExec.execute (RedirectExec.java:<span class="number">110</span>)</span><br><span class="line">    at org.apache.maven.wagon.providers.http.httpclient.impl.client.InternalHttpClient.doExecute (InternalHttpClient.java:<span class="number">185</span>)</span><br><span class="line">    at org.apache.maven.wagon.providers.http.httpclient.impl.client.CloseableHttpClient.execute (CloseableHttpClient.java:<span class="number">83</span>)</span><br><span class="line">    at org.apache.maven.wagon.providers.http.wagon.shared.AbstractHttpClientWagon.execute (AbstractHttpClientWagon.java:<span class="number">1002</span>)</span><br><span class="line">    at org.apache.maven.wagon.providers.http.wagon.shared.AbstractHttpClientWagon.fillInputData (AbstractHttpClientWagon.java:<span class="number">1160</span>)</span><br><span class="line">    at org.apache.maven.wagon.providers.http.wagon.shared.AbstractHttpClientWagon.fillInputData (AbstractHttpClientWagon.java:<span class="number">1138</span>)</span><br><span class="line">    at org.apache.maven.wagon.StreamWagon.getInputStream (StreamWagon.java:<span class="number">126</span>)</span><br><span class="line">    at org.apache.maven.wagon.StreamWagon.getIfNewer (StreamWagon.java:<span class="number">88</span>)</span><br><span class="line">    at org.apache.maven.wagon.StreamWagon.get (StreamWagon.java:<span class="number">61</span>)</span><br><span class="line">    at com.googlecode.download.maven.plugin.internal.WGet.doGet (WGet.java:<span class="number">377</span>)</span><br><span class="line">    at com.googlecode.download.maven.plugin.internal.WGet.execute (WGet.java:<span class="number">282</span>)</span><br><span class="line">    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:<span class="number">137</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:<span class="number">210</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:<span class="number">156</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:<span class="number">148</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:<span class="number">117</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.builder.multithreaded.MultiThreadedBuilder$<span class="number">1.</span>call (MultiThreadedBuilder.java:<span class="number">190</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.builder.multithreaded.MultiThreadedBuilder$<span class="number">1.</span>call (MultiThreadedBuilder.java:<span class="number">186</span>)</span><br><span class="line">    at java.util.concurrent.FutureTask.run (FutureTask.java:<span class="number">266</span>)</span><br><span class="line">    at java.util.concurrent.Executors$RunnableAdapter.call (Executors.java:<span class="number">511</span>)</span><br><span class="line">    at java.util.concurrent.FutureTask.run (FutureTask.java:<span class="number">266</span>)</span><br><span class="line">    at java.util.concurrent.ThreadPoolExecutor.runWorker (ThreadPoolExecutor.java:<span class="number">1149</span>)</span><br><span class="line">    at java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:<span class="number">624</span>)</span><br><span class="line">    at java.lang.Thread.run (Thread.java:<span class="number">748</span>)</span><br><span class="line">Caused by: java.io.EOFException: SSL peer shut down incorrectly</span><br><span class="line">    at sun.security.ssl.InputRecord.read (InputRecord.java:<span class="number">505</span>)</span><br><span class="line">    at sun.security.ssl.SSLSocketImpl.readRecord (SSLSocketImpl.java:<span class="number">975</span>)</span><br><span class="line">    at sun.security.ssl.SSLSocketImpl.performInitialHandshake (SSLSocketImpl.java:<span class="number">1367</span>)</span><br><span class="line">    at sun.security.ssl.SSLSocketImpl.startHandshake (SSLSocketImpl.java:<span class="number">1395</span>)</span><br><span class="line">    at sun.security.ssl.SSLSocketImpl.startHandshake (SSLSocketImpl.java:<span class="number">1379</span>)</span><br><span class="line">    at org.apache.maven.wagon.providers.http.httpclient.conn.ssl.SSLConnectionSocketFactory.createLayeredSocket (SSLConnectionSocketFactory.java:<span class="number">436</span>)</span><br><span class="line">    at org.apache.maven.wagon.providers.http.httpclient.conn.ssl.SSLConnectionSocketFactory.connectSocket (SSLConnectionSocketFactory.java:<span class="number">384</span>)</span><br><span class="line">    at org.apache.maven.wagon.providers.http.httpclient.impl.conn.DefaultHttpClientConnectionOperator.connect (DefaultHttpClientConnectionOperator.java:<span class="number">142</span>)</span><br><span class="line">    at org.apache.maven.wagon.providers.http.httpclient.impl.conn.PoolingHttpClientConnectionManager.connect (PoolingHttpClientConnectionManager.java:<span class="number">374</span>)</span><br><span class="line">    at org.apache.maven.wagon.providers.http.httpclient.impl.execchain.MainClientExec.establishRoute (MainClientExec.java:<span class="number">393</span>)</span><br><span class="line">    at org.apache.maven.wagon.providers.http.httpclient.impl.execchain.MainClientExec.execute (MainClientExec.java:<span class="number">236</span>)</span><br><span class="line">    at org.apache.maven.wagon.providers.http.httpclient.impl.execchain.ProtocolExec.execute (ProtocolExec.java:<span class="number">186</span>)</span><br><span class="line">    at org.apache.maven.wagon.providers.http.httpclient.impl.execchain.RetryExec.execute (RetryExec.java:<span class="number">89</span>)</span><br><span class="line">    at org.apache.maven.wagon.providers.http.httpclient.impl.execchain.RedirectExec.execute (RedirectExec.java:<span class="number">110</span>)</span><br><span class="line">    at org.apache.maven.wagon.providers.http.httpclient.impl.client.InternalHttpClient.doExecute (InternalHttpClient.java:<span class="number">185</span>)</span><br><span class="line">    at org.apache.maven.wagon.providers.http.httpclient.impl.client.CloseableHttpClient.execute (CloseableHttpClient.java:<span class="number">83</span>)</span><br><span class="line">    at org.apache.maven.wagon.providers.http.wagon.shared.AbstractHttpClientWagon.execute (AbstractHttpClientWagon.java:<span class="number">1002</span>)</span><br><span class="line">    at org.apache.maven.wagon.providers.http.wagon.shared.AbstractHttpClientWagon.fillInputData (AbstractHttpClientWagon.java:<span class="number">1160</span>)</span><br><span class="line">    at org.apache.maven.wagon.providers.http.wagon.shared.AbstractHttpClientWagon.fillInputData (AbstractHttpClientWagon.java:<span class="number">1138</span>)</span><br><span class="line">    at org.apache.maven.wagon.StreamWagon.getInputStream (StreamWagon.java:<span class="number">126</span>)</span><br><span class="line">    at org.apache.maven.wagon.StreamWagon.getIfNewer (StreamWagon.java:<span class="number">88</span>)</span><br><span class="line">    at org.apache.maven.wagon.StreamWagon.get (StreamWagon.java:<span class="number">61</span>)</span><br><span class="line">    at com.googlecode.download.maven.plugin.internal.WGet.doGet (WGet.java:<span class="number">377</span>)</span><br><span class="line">    at com.googlecode.download.maven.plugin.internal.WGet.execute (WGet.java:<span class="number">282</span>)</span><br><span class="line">    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:<span class="number">137</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:<span class="number">210</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:<span class="number">156</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:<span class="number">148</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:<span class="number">117</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.builder.multithreaded.MultiThreadedBuilder$<span class="number">1.</span>call (MultiThreadedBuilder.java:<span class="number">190</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.builder.multithreaded.MultiThreadedBuilder$<span class="number">1.</span>call (MultiThreadedBuilder.java:<span class="number">186</span>)</span><br><span class="line">    at java.util.concurrent.FutureTask.run (FutureTask.java:<span class="number">266</span>)</span><br><span class="line">    at java.util.concurrent.Executors$RunnableAdapter.call (Executors.java:<span class="number">511</span>)</span><br><span class="line">    at java.util.concurrent.FutureTask.run (FutureTask.java:<span class="number">266</span>)</span><br><span class="line">    at java.util.concurrent.ThreadPoolExecutor.runWorker (ThreadPoolExecutor.java:<span class="number">1149</span>)</span><br><span class="line">    at java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:<span class="number">624</span>)</span><br><span class="line">    at java.lang.Thread.run (Thread.java:<span class="number">748</span>)</span><br></pre></td></tr></tbody></table></figure>
<h4 id="解决-1"><a href="#解决-1" class="headerlink" title="解决"></a>解决</h4><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ wget https://github.com/jt2594838/mvn-thrift-compiler/raw/master/thrift_0.12.0_0.13.0_mac.exe</span><br><span class="line">$ cp thrift_0.12.0_0.13.0_mac.exe thrift/target/tools/</span><br></pre></td></tr></tbody></table></figure>
<h2 id="社区发展"><a href="#社区发展" class="headerlink" title="社区发展"></a>社区发展</h2><h3 id="Star-趋势"><a href="#Star-趋势" class="headerlink" title="Star 趋势"></a>Star 趋势</h3><p><img data-src="/picture/iotdb/apache_iotdb_star_history.jpg" alt="Apache IoTDB Star History"></p>
<center>（图片来源：<a href="https://star-history.t9t.io/#apache/druid&amp;apache/pinot&amp;influxdata/influxdb&amp;timescale/timescaledb&amp;OpenTSDB/opentsdb&amp;crate/crate&amp;apache/iotdb" target="_blank" rel="external nofollow noopener noreferrer">star-history.t9t.io</a>™ 官网）</center>

<h3 id="个人贡献"><a href="#个人贡献" class="headerlink" title="个人贡献"></a>个人贡献</h3><ul>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/apache/iotdb/pulls?q=is%3Apr+author%3Aasdf2014">Pull Request</a></li>
</ul>
<p>　详见：《<a href="https://yuzhouwan.com/posts/19631/">如何成为 Apache 的 PMC</a>》</p>
<h2 id="欢迎加入我们的技术群，一起交流学习"><a href="#欢迎加入我们的技术群，一起交流学习" class="headerlink" title="欢迎加入我们的技术群，一起交流学习"></a><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/asdf2014/yuzhouwan#technical-discussion-group">欢迎加入我们的技术群，一起交流学习</a></h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">群名称</th>
<th style="text-align:center">群号</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">人工智能（高级）</td>
<td style="text-align:center"><a target="_blank" rel="external nofollow noopener noreferrer" href="https://shang.qq.com/wpa/qunwpa?idkey=71c6bd3fb0ff01d93abca654140387d99d3be752f92a53c1fbfd27f2dd4b4247"><img data-src="https://img.shields.io/badge/QQ%E7%BE%A4-1020982-blue.svg" alt></a></td>
</tr>
<tr>
<td style="text-align:center">人工智能（进阶）</td>
<td style="text-align:center"><a target="_blank" rel="external nofollow noopener noreferrer" href="https://shang.qq.com/wpa/qunwpa?idkey=deb268f65589a1a0a1dbaf7b72c849ed45298697805bef81e0c613dea40cd05e"><img data-src="https://img.shields.io/badge/QQ%E7%BE%A4-1217710-blue.svg" alt></a></td>
</tr>
<tr>
<td style="text-align:center">BigData</td>
<td style="text-align:center"><a target="_blank" rel="external nofollow noopener noreferrer" href="https://shang.qq.com/wpa/qunwpa?idkey=f86b3c8de20da1658a3bb42df17a2fc4eee0d75c4a130a63585fdd257e3565ed"><img data-src="https://img.shields.io/badge/QQ%E7%BE%A4-1670647-blue.svg" alt></a></td>
</tr>
<tr>
<td style="text-align:center">算法</td>
<td style="text-align:center"><a target="_blank" rel="external nofollow noopener noreferrer" href="https://shang.qq.com/wpa/qunwpa?idkey=bfbcf1453371a0810fd6be235ace47147f6fb9d262fb768b497c861f50af0af4"><img data-src="https://img.shields.io/badge/QQ%E7%BE%A4-5366753-blue.svg" alt></a></td>
</tr>
</tbody>
</table>
</div>

    </div>

    
    
    
      
  <div class="popular-posts-header">相关文章</div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/posts/201220/" rel="bookmark">一幅持续扩展的物联网思维导图</a></div>
    </li>
  </ul>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>Benedict Jin
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://yuzhouwan.com/posts/201221/" title="Apache IoTDB：一款面向物联网的数据库">https://yuzhouwan.com/posts/201221/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-ND</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

        

  <div class="followme">
    <p>欢迎关注我的其它发布渠道</p>

    <div class="social-list">

        <div class="social-item">
          <a target="_blank" class="social-link" href="/wechat_channel.jpg">
            <span class="icon">
              <i class="fab fa-weixin"></i>
            </span>

            <span class="label">WeChat</span>
          </a>
        </div>

        <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
        </div>
    </div>
  </div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/IoT/" rel="tag"># IoT</a>
              <a href="/tags/%E7%89%A9%E8%81%94%E7%BD%91/" rel="tag"># 物联网</a>
              <a href="/tags/Apache-IoTDB/" rel="tag"># Apache IoTDB</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/posts/201220/" rel="prev" title="一幅持续扩展的物联网思维导图">
      <i class="fa fa-chevron-left"></i> 一幅持续扩展的物联网思维导图
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
      <div class="tabs tabs-comment">
        <ul class="nav-tabs">
            <li class="tab"><a href="#comment-gitalk">Gitalk：可用 Github 账号登录</a></li>
            <li class="tab"><a href="#comment-disqus">Disqus：海外</a></li>
            <li class="tab"><a href="#comment-valine">Valine：匿名</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane gitalk" id="comment-gitalk">
              <div class="comments" id="gitalk-container"></div>
            </div>
            <div class="tab-pane disqus" id="comment-disqus">
              
  <div class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  
            </div>
            <div class="tab-pane valine" id="comment-valine">
              <div class="comments" id="valine-comments"></div>
            </div>
        </div>
      </div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Apache-IoTDB-%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="nav-number">1.</span> <span class="nav-text">Apache IoTDB 是什么？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%89%B9%E6%80%A7"><span class="nav-number">2.</span> <span class="nav-text">特性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="nav-number">3.</span> <span class="nav-text">应用场景</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%83%A8%E7%BD%B2"><span class="nav-number">4.</span> <span class="nav-text">部署</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Docker-%E5%AE%B9%E5%99%A8%E7%89%88"><span class="nav-number">4.1.</span> <span class="nav-text">Docker 容器版</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E7%BE%A4%E7%89%88"><span class="nav-number">4.2.</span> <span class="nav-text">集群版</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E8%A3%85"><span class="nav-number">4.2.1.</span> <span class="nav-text">安装</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8"><span class="nav-number">4.2.2.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%81%9C%E6%AD%A2"><span class="nav-number">4.2.3.</span> <span class="nav-text">停止</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BE%85%E5%AE%8C%E5%96%84%E5%88%97%E8%A1%A8"><span class="nav-number">4.2.4.</span> <span class="nav-text">待完善列表</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9E%B6%E6%9E%84"><span class="nav-number">5.</span> <span class="nav-text">架构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%BB%E4%BD%93%E6%9E%B6%E6%9E%84%E5%9B%BE"><span class="nav-number">5.1.</span> <span class="nav-text">总体架构图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%99%E5%85%A5%E9%93%BE%E8%B7%AF"><span class="nav-number">5.2.</span> <span class="nav-text">写入链路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E9%93%BE%E8%B7%AF"><span class="nav-number">5.3.</span> <span class="nav-text">查询链路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="nav-number">5.4.</span> <span class="nav-text">目录结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%8B%E7%BC%A9%E7%AD%96%E7%95%A5"><span class="nav-number">5.5.</span> <span class="nav-text">压缩策略</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%A7%E8%83%BD%E5%8E%8B%E6%B5%8B"><span class="nav-number">6.</span> <span class="nav-text">性能压测</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B8%A9%E8%BF%87%E7%9A%84%E5%9D%91"><span class="nav-number">7.</span> <span class="nav-text">踩过的坑</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Cannot-connect-to-node-Node"><span class="nav-number">7.1.</span> <span class="nav-text">Cannot connect to node Node</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8F%8F%E8%BF%B0"><span class="nav-number">7.1.1.</span> <span class="nav-text">描述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3"><span class="nav-number">7.1.2.</span> <span class="nav-text">解决</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#org-apache-maven-wagon-TransferFailedException-Transfer-failed"><span class="nav-number">7.2.</span> <span class="nav-text">org.apache.maven.wagon.TransferFailedException: Transfer failed</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8F%8F%E8%BF%B0-1"><span class="nav-number">7.2.1.</span> <span class="nav-text">描述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3-1"><span class="nav-number">7.2.2.</span> <span class="nav-text">解决</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A4%BE%E5%8C%BA%E5%8F%91%E5%B1%95"><span class="nav-number">8.</span> <span class="nav-text">社区发展</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Star-%E8%B6%8B%E5%8A%BF"><span class="nav-number">8.1.</span> <span class="nav-text">Star 趋势</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%AA%E4%BA%BA%E8%B4%A1%E7%8C%AE"><span class="nav-number">8.2.</span> <span class="nav-text">个人贡献</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%AC%A2%E8%BF%8E%E5%8A%A0%E5%85%A5%E6%88%91%E4%BB%AC%E7%9A%84%E6%8A%80%E6%9C%AF%E7%BE%A4%EF%BC%8C%E4%B8%80%E8%B5%B7%E4%BA%A4%E6%B5%81%E5%AD%A6%E4%B9%A0"><span class="nav-number">9.</span> <span class="nav-text">欢迎加入我们的技术群，一起交流学习</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Benedict Jin" src="/yuzhouwan_logo_128x128.ico">
  <p class="site-author-name" itemprop="name">Benedict Jin</p>
  <div class="site-description" itemprop="description">Benedict Jin's Blog</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">54</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">147</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/asdf2014" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;asdf2014" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:asdf2014@apache.org" title="E-Mail → mailto:asdf2014@apache.org" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh" class="cc-opacity" rel="external nofollow noopener noreferrer" target="_blank"><img src="/images/cc-by-nc-nd.svg" alt="Creative Commons"></a>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        
  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="external nofollow noopener noreferrer" target="_blank">苏 ICP 备 17032505号 </a>
  </div>

<div class="copyright">
  
  &copy; 2014 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">yuzhouwan.com</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">1.3m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">20:06</span>
</div>

        
<meta name="referrer" content="always">
<div class="busuanzi-count">
  <script async src="/lib/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.5/lib/darkmode-js.min.js"></script>
<script>
var options = {
  bottom: '32px', // default: '32px'
  right: '32px', // default: '32px'
  left: 'unset', // default: 'unset'
  time: '0.5s', // default: '0.3s'
  mixColor: '#fff', // default: '#fff'
  backgroundColor: '#fff',  // default: '#fff'
  buttonColorDark: '#100f2c',  // default: '#100f2c'
  buttonColorLight: '#fff', // default: '#fff'
  saveInCookies: true, // default: true,
  label: '🌓', // default: ''
  autoMatchOsTheme: false // default: true
}
const darkmode = new Darkmode(options);
darkmode.showWidget();
</script>
<style>
button.darkmode-toggle {
  z-index: 9999;
}
img, .darkmode-ignore {
  isolation: isolate;
  display: block;
}
</style>

  




  
<script src="/js/local-search.js"></script>











<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  

  

<script>
  var disqus_config = function() {
    this.page.url = "https://yuzhouwan.com/posts/201221/";
    this.page.identifier = "posts/201221/";
    this.page.title = "Apache IoTDB：一款面向物联网的数据库";
    };
  NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://yuzhouwan.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : 'e5da61069b94deb8ef3a',
      clientSecret: 'c60ad4e430be258b705027a036eeee3d71cb934b',
      repo        : 'gitment',
      owner       : 'asdf2014',
      admin       : ['asdf2014'],
      id          : '2403407d48bcc6d4bc49aced875d5377',
        language: '',
      distractionFreeMode: false
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script>


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : 'BU4bnWsdAliFfk3fz7iMcFUU-gzGzoHsz',
      appKey     : '1xVLNFSy1qGCda3wt4GiGzHG',
      placeholder: "上述信息都不是必填的，可以直接提交评论",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</body>
</html>
